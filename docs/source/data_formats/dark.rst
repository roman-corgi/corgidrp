.. _dark-label:

Dark Data Product
========================================


FITS HDU Structure
------------------


+-------+------------------+----------+----------------------+
| Index | Name             | Datatype | Array Size           |
+=======+==================+==========+======================+
| 0     | Primary          | None     | 0                    |
+-------+------------------+----------+----------------------+
| 1     | Image            | float64  | (1024, 1024)         |
+-------+------------------+----------+----------------------+
| 2     | ERR              | float64  | (1, 1024, 1024)      |
+-------+------------------+----------+----------------------+
| 3     | DQ               | int64    | (1024, 1024)         |
+-------+------------------+----------+----------------------+


Header
------

Primary Header (HDU 0)
^^^^^^^^^^^^^^^^^^^^^^


+------------+------------+--------------------------------+----------------------------------------------------+
| Keyword    | Datatype   | Example Value                  | Description                                        |
+============+============+================================+====================================================+
| SIMPLE     | bool       | True                           | conforms to FITS standard                          |
+------------+------------+--------------------------------+----------------------------------------------------+
| BITPIX     | int        | 8                              | array data type                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS      | int        | 0                              | number of array dimensions                         |
+------------+------------+--------------------------------+----------------------------------------------------+
| EXTEND     | bool       | True                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| OBSID      | int        | 0                              | Observation ID                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| BUILD      | int        | 22                             | CDMS pipeline build                                |
+------------+------------+--------------------------------+----------------------------------------------------+
| OBSTYPE    | str        | SCI                            | Observation Template                               |
+------------+------------+--------------------------------+----------------------------------------------------+
| OBSNUM     | int        | 0                              |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| OBSNAME    | str        | SCI                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| PHTCNT     | bool       | False                          |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| ORIGIN     | str        | DRP                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+


Image Header (HDU 1)
^^^^^^^^^^^^^^^^^^^^


+------------+------------+--------------------------------+----------------------------------------------------+
| Keyword    | Datatype   | Example Value                  | Description                                        |
+============+============+================================+====================================================+
| XTENSION   | str        | IMAGE                          | Image extension                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| BITPIX     | int        | -64                            | array data type                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS      | int        | 2                              | number of array dimensions                         |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS1     | int        | 1024                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS2     | int        | 1024                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| PCOUNT     | int        | 0                              | number of parameters                               |
+------------+------------+--------------------------------+----------------------------------------------------+
| GCOUNT     | int        | 1                              | number of groups                                   |
+------------+------------+--------------------------------+----------------------------------------------------+
| ARRTYPE    | str        | SCI                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| SCTSRT     | str        | 2024-03-14T23:45:19.442        | Start TAI                                          |
+------------+------------+--------------------------------+----------------------------------------------------+
| SCTEND     | str        | 2024-03-14T23:45:22.417        | Start TAI                                          |
+------------+------------+--------------------------------+----------------------------------------------------+
| STATUS     | int        | 0                              |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| HVCBIAS    | int        | 0                              | HV Clock bias                                      |
+------------+------------+--------------------------------+----------------------------------------------------+
| OPMODE     | str        | RESERVED                       | EXCAM readout operational mode                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| EXPTIME    | float      | 100.0                          | Exposing stage duration (seconds)                  |
+------------+------------+--------------------------------+----------------------------------------------------+
| CMDGAIN    | float      | 1.340000033378601              | Commanded gain                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| CYCLES     | int        | 14653296363191                 | EXCAM clock cycles since boot                      |
+------------+------------+--------------------------------+----------------------------------------------------+
| LASTEXP    | int        | 4000000000                     | clock cycles spent in last exposure stage of re    |
+------------+------------+--------------------------------+----------------------------------------------------+
| BLNKTIME   | float      | 0.001560125                    | commanded blanking (seconds)                       |
+------------+------------+--------------------------------+----------------------------------------------------+
| BLNKCYC    | int        | 62405                          | commanded blanking (cycles)                        |
+------------+------------+--------------------------------+----------------------------------------------------+
| EXPCYC     | int        | 4000000000                     | Exposing stage duration (cycles)                   |
+------------+------------+--------------------------------+----------------------------------------------------+
| OVEREXP    | int        | 0                              | over-illumination flag                             |
+------------+------------+--------------------------------+----------------------------------------------------+
| NOVEREXP   | int        | 0                              | Number of pixels overexposed /100                  |
+------------+------------+--------------------------------+----------------------------------------------------+
| EXCAMT     | float      | -88.01570892333984             | Camera temperature                                 |
+------------+------------+--------------------------------+----------------------------------------------------+
| PROXET     | float      | 24.47091674804688              | Thermal strap I/F, EXCam ProxE heater              |
+------------+------------+--------------------------------+----------------------------------------------------+
| FCMLOOP    | int        | 0                              | Control state FCM loop                             |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSMINNER   | int        | 1                              | Control state FSM inner loop                       |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSMLOS     | int        | 0                              | Control state FSM LOS loop                         |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSMSG1     | float      | 2.49938966589979e-05           | Fast Steering Mirror SG1 (V)                       |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSMSG2     | float      | 2.00805661734193e-05           | Fast Steering Mirror SG2 (V)                       |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSMSG3     | float      | 1.44653322422527e-05           | Fast Steering Mirror SG3 (V)                       |
+------------+------------+--------------------------------+----------------------------------------------------+
| DMZLOOP    | int        | 0                              | Control state DM zernike loop                      |
+------------+------------+--------------------------------+----------------------------------------------------+
| SPAM_H     | float      | 1001.325805664062              | SPAM micron +H                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| SPAM_V     | float      | 16626.70703125                 | SPAM micron +V                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| FPAM_H     | float      | 3521.670166015625              | FPAM micron +H                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| FPAM_V     | float      | 32840.1875                     | FPAM micron +V                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| LSAM_H     | float      | 20822.392578125                | LSAM micron +H                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| LSAM_V     | float      | 17393.81640625                 | LSAM micron +V                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSAM_H     | float      | 30780.482421875                | FSAM micron +H                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| FSAM_V     | float      | 2869.385009765625              | FSAM micron +V                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| CFAM_H     | float      | 35329.515625                   | CFAM micron +H                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| CFAM_V     | float      | 17001.533203125                | CFAM micron +V                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| DPAM_H     | float      | 38917.078125                   | DPAM micron +H                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| DPAM_V     | float      | 26016.892578125                | DPAM micron +V                                     |
+------------+------------+--------------------------------+----------------------------------------------------+
| DATETIME   | str        | 2024-03-14T23:45:19.367        | Time of preceding 1Hz HK packet                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| DATA_LEVEL | str        | L1                             |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| MISSING    | bool       | False                          | Flagged if header keywords are missing             |
+------------+------------+--------------------------------+----------------------------------------------------+
| EMGAIN_C   | float      | 1.340000033378601              |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| EMGAIN_A   | int        | -1                             |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| DATALVL    | str        | CAL                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| ISPC       | bool       | False                          |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| DESMEAR    | bool       | False                          | Was desmear applied to this frame?                 |
+------------+------------+--------------------------------+----------------------------------------------------+
| CTI_CORR   | bool       | False                          | Was CTI correction applied to this frame?          |
+------------+------------+--------------------------------+----------------------------------------------------+
| IS_BAD     | bool       | False                          | Was this frame deemed bad?                         |
+------------+------------+--------------------------------+----------------------------------------------------+
| RECIPE     | str        | {"name": "build_trad_dark",... |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| DRPVERSN   | str        | 2.0                            | corgidrp version that produced this file           |
+------------+------------+--------------------------------+----------------------------------------------------+
| DRPCTIME   | str        | 2025-04-29T23:45:18.161        | When this file was saved                           |
+------------+------------+--------------------------------+----------------------------------------------------+
| FWC_PP_E   | float      | 90000.0                        |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| FWC_EM_E   | float      | 100000.0                       |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| SAT_DN     | float      | 8045.977011494252              |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| BUNIT      | str        | Detected Electrons             |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| KGAINPAR   | float      | 8.7                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| KGAIN_ER   | float      | 0.0                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| RN         | str        |                                |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| RN_ERR     | str        |                                |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| DATATYPE   | str        | Dark                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| PC_STAT    | str        | analog master dark             |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| FILE0      | str        | CGI_EXCAM_L2a0000056104.fits   | File name for the n-th science file used           |
+------------+------------+--------------------------------+----------------------------------------------------+
| DRPNFILE   | int        | 48                             | # of files used to create this processed frame     |
+------------+------------+--------------------------------+----------------------------------------------------+
| HISTORY    | str        | Bias subtracted Cosmic ray ... |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+


ERR Header (HDU 2)
^^^^^^^^^^^^^^^^^^


+------------+------------+--------------------------------+----------------------------------------------------+
| Keyword    | Datatype   | Example Value                  | Description                                        |
+============+============+================================+====================================================+
| XTENSION   | str        | IMAGE                          | Image extension                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| BITPIX     | int        | -64                            | array data type                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS      | int        | 3                              | number of array dimensions                         |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS1     | int        | 1024                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS2     | int        | 1024                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS3     | int        | 1                              |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| PCOUNT     | int        | 0                              | number of parameters                               |
+------------+------------+--------------------------------+----------------------------------------------------+
| GCOUNT     | int        | 1                              | number of groups                                   |
+------------+------------+--------------------------------+----------------------------------------------------+
| EXTNAME    | str        | ERR                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| TRK_ERRS   | bool       | False                          |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| LAYER_1    | str        | combined_error                 |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| BUNIT      | str        | Detected Electrons             |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| KGAINPAR   | float      | 8.7                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| KGAIN_ER   | float      | 0.0                            |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| RN         | str        |                                |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| RN_ERR     | str        |                                |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| HISTORY    | str        | Added error term: prescan_b... |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+


DQ Header (HDU 3)
^^^^^^^^^^^^^^^^^


+------------+------------+--------------------------------+----------------------------------------------------+
| Keyword    | Datatype   | Example Value                  | Description                                        |
+============+============+================================+====================================================+
| XTENSION   | str        | IMAGE                          | Image extension                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| BITPIX     | int        | 64                             | array data type                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS      | int        | 2                              | number of array dimensions                         |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS1     | int        | 1024                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| NAXIS2     | int        | 1024                           |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+
| PCOUNT     | int        | 0                              | number of parameters                               |
+------------+------------+--------------------------------+----------------------------------------------------+
| GCOUNT     | int        | 1                              | number of groups                                   |
+------------+------------+--------------------------------+----------------------------------------------------+
| EXTNAME    | str        | DQ                             |                                                    |
+------------+------------+--------------------------------+----------------------------------------------------+


